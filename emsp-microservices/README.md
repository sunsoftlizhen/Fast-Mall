# EMSP å¾®æœåŠ¡æ¶æ„

EMSP (E-commerce & Moments Social Platform) å¾®æœåŠ¡æ¶æ„ï¼ŒåŸºäº Spring Boot + Spring Cloud æ„å»ºã€‚

## ğŸ—ï¸ æ¶æ„æ¦‚è¿°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Frontend  â”‚    â”‚  Mobile App     â”‚    â”‚  Admin Panel    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      API Gateway            â”‚
                    â”‚     (Port: 8080)            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                   â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Auth Service    â”‚ â”‚  User Service â”‚ â”‚ Product Service   â”‚
    â”‚   (Port: 8081)    â”‚ â”‚ (Port: 8082)  â”‚ â”‚  (Port: 8083)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                   â”‚                   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                   â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Order Service    â”‚ â”‚ Moment Serviceâ”‚ â”‚   Eureka Server   â”‚
    â”‚  (Port: 8084)     â”‚ â”‚ (Port: 8085)  â”‚ â”‚  (Port: 8761)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      MySQL            â”‚ â”‚     Redis     â”‚
                    â”‚    (Port: 3306)       â”‚ â”‚ (Port: 6379)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ æœåŠ¡æ¸…å•

| æœåŠ¡åç§°        | ç«¯å£ | æè¿°         | æŠ€æœ¯æ ˆ               |
| --------------- | ---- | ------------ | -------------------- |
| gateway         | 8080 | API ç½‘å…³     | Spring Cloud Gateway |
| eureka          | 8761 | æœåŠ¡æ³¨å†Œä¸­å¿ƒ | Spring Cloud Eureka  |
| auth-service    | 8081 | è®¤è¯æˆæƒæœåŠ¡ | Spring Boot + JWT    |
| user-service    | 8082 | ç”¨æˆ·ç®¡ç†æœåŠ¡ | Spring Boot + JPA    |
| product-service | 8083 | å•†å“ç®¡ç†æœåŠ¡ | Spring Boot + JPA    |
| order-service   | 8084 | è®¢å•ç®¡ç†æœåŠ¡ | Spring Boot + JPA    |
| moment-service  | 8085 | åŠ¨æ€ç¤¾äº¤æœåŠ¡ | Spring Boot + JPA    |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Java 11+
- Maven 3.6+
- Docker & Docker Compose
- MySQL 8.0+

### 1. æ„å»ºæ‰€æœ‰æœåŠ¡

```bash
cd emsp-microservices
./scripts/build-all.sh
```

### 2. å¯åŠ¨æœåŠ¡é›†ç¾¤

```bash
./scripts/start-services.sh
```

### 3. éªŒè¯æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹Eurekaæ³¨å†Œä¸­å¿ƒ
open http://localhost:8761

# æµ‹è¯•APIç½‘å…³
curl http://localhost:8080/actuator/health
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨åŸºç¡€è®¾æ–½
docker-compose up -d mysql redis eureka

# å¯åŠ¨å•ä¸ªæœåŠ¡ï¼ˆä»¥è®¤è¯æœåŠ¡ä¸ºä¾‹ï¼‰
cd auth-service
mvn spring-boot:run
```

### æœåŠ¡é…ç½®

æ¯ä¸ªæœåŠ¡æ”¯æŒä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼š

- `application.yml` - é»˜è®¤é…ç½®
- `application-dev.yml` - å¼€å‘ç¯å¢ƒ
- `application-docker.yml` - Docker ç¯å¢ƒ
- `application-prod.yml` - ç”Ÿäº§ç¯å¢ƒ

### API æ–‡æ¡£

å„æœåŠ¡å¯åŠ¨åå¯è®¿é—® Swagger æ–‡æ¡£ï¼š

- è®¤è¯æœåŠ¡: http://localhost:8081/swagger-ui.html
- ç”¨æˆ·æœåŠ¡: http://localhost:8082/swagger-ui.html
- å•†å“æœåŠ¡: http://localhost:8083/swagger-ui.html
- è®¢å•æœåŠ¡: http://localhost:8084/swagger-ui.html
- åŠ¨æ€æœåŠ¡: http://localhost:8085/swagger-ui.html

## ğŸ”§ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

- **Spring Boot 2.7.0** - å¾®æœåŠ¡æ¡†æ¶
- **Spring Cloud 2021.0.3** - å¾®æœåŠ¡æ²»ç†
- **Spring Cloud Gateway** - API ç½‘å…³
- **Spring Cloud Eureka** - æœåŠ¡æ³¨å†Œå‘ç°
- **Spring Data JPA** - æ•°æ®è®¿é—®å±‚
- **Spring Security** - å®‰å…¨æ¡†æ¶

### æ•°æ®å­˜å‚¨

- **MySQL 8.0** - å…³ç³»å‹æ•°æ®åº“
- **Redis 7** - ç¼“å­˜æ•°æ®åº“

### å·¥å…·åº“

- **Lombok** - ç®€åŒ–ä»£ç 
- **JWT** - ä»¤ç‰Œè®¤è¯
- **Maven** - é¡¹ç›®æ„å»º

## ğŸ“Š ç›‘æ§è¿ç»´

### å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:8080/actuator/health
curl http://localhost:8081/actuator/health
curl http://localhost:8082/actuator/health
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f auth-service

# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs -f
```

### æœåŠ¡æ‰©å®¹

```bash
# æ‰©å®¹ç”¨æˆ·æœåŠ¡åˆ°3ä¸ªå®ä¾‹
docker-compose up -d --scale user-service=3
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
./scripts/build-all.sh
./scripts/start-services.sh

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶
2. æ„å»ºç”Ÿäº§é•œåƒ
3. ä½¿ç”¨ Kubernetes æˆ– Docker Swarm éƒ¨ç½²
4. é…ç½®è´Ÿè½½å‡è¡¡å’Œç›‘æ§

## ğŸ” å®‰å…¨é…ç½®

### JWT é…ç½®

- å¯†é’¥: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¯·ä¿®æ”¹`jwt.secret`
- è¿‡æœŸæ—¶é—´: é»˜è®¤ 24 å°æ—¶
- åˆ·æ–°æœºåˆ¶: æ”¯æŒä»¤ç‰Œåˆ·æ–°

### æ•°æ®åº“å®‰å…¨

- ä½¿ç”¨ä¸“ç”¨æ•°æ®åº“ç”¨æˆ·
- å¯ç”¨ SSL è¿æ¥
- å®šæœŸå¤‡ä»½æ•°æ®

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜ç­–ç•¥

- Redis ç¼“å­˜çƒ­ç‚¹æ•°æ®
- æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–
- JVM å‚æ•°è°ƒä¼˜

### ç›‘æ§æŒ‡æ ‡

- æœåŠ¡å“åº”æ—¶é—´
- æ•°æ®åº“è¿æ¥æ•°
- å†…å­˜ä½¿ç”¨ç‡
- CPU ä½¿ç”¨ç‡

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç å˜æ›´
4. åˆ›å»º Pull Request

## ï¿½ï¿½ è®¸å¯è¯

MIT License
