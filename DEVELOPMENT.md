# EMSP å¼€å‘æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

EMSP (E-commerce & Moments Social Platform) æ˜¯ä¸€ä¸ªåŸºäº Vue3 + Koa + MySQL çš„ç°ä»£åŒ–ç”µå•†ä¸ç¤¾äº¤å¹³å°ï¼Œæ”¯æŒç”¨æˆ·ç®¡ç†ã€è§’è‰²æƒé™ç®¡ç†ã€å•†å“ç®¡ç†ã€æœ‹å‹åœˆç¤¾äº¤ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ

### å‰ç«¯

- **Vue 3** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **Element Plus** - Vue 3 ç»„ä»¶åº“
- **Vue Router** - è·¯ç”±ç®¡ç†
- **Pinia** - çŠ¶æ€ç®¡ç†
- **Axios** - HTTP å®¢æˆ·ç«¯
- **ECharts** - æ•°æ®å¯è§†åŒ–
- **Vite** - æ„å»ºå·¥å…·

### åç«¯

- **Node.js** - JavaScript è¿è¡Œæ—¶
- **Koa** - Web æ¡†æ¶
- **MySQL** - å…³ç³»å‹æ•°æ®åº“
- **JWT** - èº«ä»½éªŒè¯
- **bcrypt** - å¯†ç åŠ å¯†
- **Joi** - æ•°æ®éªŒè¯

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” è®¤è¯æˆæƒ

- JWT Token èº«ä»½éªŒè¯
- åŸºäºè§’è‰²çš„æƒé™ç®¡ç† (RBAC)
- ç™»å½•/æ³¨å†ŒåŠŸèƒ½
- æƒé™è·¯ç”±å®ˆå«

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†

- ç”¨æˆ·åˆ—è¡¨æŸ¥çœ‹ï¼ˆæ”¯æŒåˆ†é¡µã€æœç´¢ï¼‰
- æ·»åŠ /ç¼–è¾‘/åˆ é™¤ç”¨æˆ·
- ç”¨æˆ·çŠ¶æ€ç®¡ç†
- ä¸ªäººä¿¡æ¯ç®¡ç†
- å¯†ç ä¿®æ”¹

### ğŸ›¡ï¸ è§’è‰²æƒé™

- è§’è‰²ç®¡ç†
- æƒé™åˆ†é…
- åŠ¨æ€èœå•æ˜¾ç¤º
- æŒ‰é’®çº§æƒé™æ§åˆ¶

### ğŸ“Š æ•°æ®ç»Ÿè®¡

- ç”¨æˆ·æ•°æ®ç»Ÿè®¡
- å›¾è¡¨å¯è§†åŒ–å±•ç¤º
- å®æ—¶æ•°æ®æ›´æ–°

### ğŸ›ï¸ å•†å“ç®¡ç†

- å•†å“åˆ—è¡¨ç®¡ç†ï¼ˆæ”¯æŒåˆ†é¡µã€æœç´¢ã€ç­›é€‰ï¼‰
- æ·»åŠ /ç¼–è¾‘/åˆ é™¤å•†å“
- å•†å“è§„æ ¼å’Œå•ä½ç®¡ç†
- ä»·æ ¼ä¿¡æ¯ç®¡ç†ï¼ˆè¿›è´§ä»·ã€å”®ä»·ã€æŠ˜æ‰£ä»·ï¼‰
- åº“å­˜æ•°é‡ç®¡ç†
- å•†å“çŠ¶æ€æ§åˆ¶
- ä¿è´¨æœŸç®¡ç†

## æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

#### ç”¨æˆ·ç›¸å…³

- `users` - ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
- `roles` - è§’è‰²ä¿¡æ¯
- `permissions` - æƒé™ä¿¡æ¯
- `role_permissions` - è§’è‰²æƒé™å…³è”

#### å•†å“ç›¸å…³

- `products` - å•†å“åŸºæœ¬ä¿¡æ¯
- `product_specs` - å•†å“è§„æ ¼æšä¸¾
- `product_units` - å•†å“å•ä½æšä¸¾

### æƒé™ç³»ç»Ÿ

ç³»ç»Ÿå†…ç½®ä»¥ä¸‹æƒé™ï¼š

- **ç”¨æˆ·ç®¡ç†**: `user:view`, `user:add`, `user:edit`, `user:delete`
- **è§’è‰²ç®¡ç†**: `role:manage`
- **æƒé™ç®¡ç†**: `permission:manage`
- **ç³»ç»Ÿè®¾ç½®**: `system:setting`
- **å•†å“ç®¡ç†**: `product:view`, `product:add`, `product:edit`, `product:delete`

## é¡¹ç›®ç»“æ„

```
emsp/
â”œâ”€â”€ backend/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/     # æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.js      # è®¤è¯æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ userController.js      # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ roleController.js      # è§’è‰²ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ permissionController.js # æƒé™ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboardController.js # ä»ªè¡¨æ¿
â”‚   â”‚   â”‚   â””â”€â”€ productController.js   # å•†å“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.js       # èº«ä»½éªŒè¯
â”‚   â”‚   â”‚   â”œâ”€â”€ permission.js # æƒé™æ£€æŸ¥
â”‚   â”‚   â”‚   â””â”€â”€ errorHandler.js # é”™è¯¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ routes/          # è·¯ç”±
â”‚   â”‚   â””â”€â”€ utils/           # å·¥å…·ç±»
â”‚   â”œâ”€â”€ app.js               # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/                # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ users/       # ç”¨æˆ·ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ roles/       # è§’è‰²ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ permissions/ # æƒé™ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ products/    # å•†å“ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ router/          # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/          # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ utils/           # å·¥å…·ç±»
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ database/                # æ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ init.sql            # åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ products.sql        # å•†å“è¡¨è„šæœ¬
â”‚   â””â”€â”€ product-permissions.sql # å•†å“æƒé™è„šæœ¬
â””â”€â”€ README.md
```

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£… Node.js (æ¨è v16+)
# å®‰è£… MySQL (æ¨è v8.0+)
```

### 2. æ•°æ®åº“åˆå§‹åŒ–

```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p -e "CREATE DATABASE emsp CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# å¯¼å…¥åˆå§‹åŒ–è„šæœ¬
mysql -u root -p emsp < database/init.sql
mysql -u root -p emsp < database/products.sql
mysql -u root -p emsp < database/product-permissions.sql
```

### 3. å¯åŠ¨é¡¹ç›®

```bash
# ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰
chmod +x start.sh
./start.sh

# æˆ–è€…åˆ†åˆ«å¯åŠ¨
# åç«¯
cd backend && npm install && npm start

# å‰ç«¯
cd frontend && npm install && npm run dev
```

### 4. è®¿é—®ç³»ç»Ÿ

- å‰ç«¯åœ°å€: http://localhost:8081
- åç«¯åœ°å€: http://localhost:3000

### 5. é»˜è®¤è´¦å·

- **ç®¡ç†å‘˜**: admin / admin123
- **æ™®é€šç”¨æˆ·**: testuser / user123

## API æ¥å£

### è®¤è¯æ¥å£

- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `GET /api/auth/current` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### ç”¨æˆ·ç®¡ç†æ¥å£

- `GET /api/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `POST /api/users` - åˆ›å»ºç”¨æˆ·
- `PUT /api/users/:id` - æ›´æ–°ç”¨æˆ·
- `DELETE /api/users/:id` - åˆ é™¤ç”¨æˆ·
- `GET /api/users/profile` - è·å–ä¸ªäººä¿¡æ¯
- `PUT /api/users/profile` - æ›´æ–°ä¸ªäººä¿¡æ¯

### è§’è‰²ç®¡ç†æ¥å£

- `GET /api/roles` - è·å–è§’è‰²åˆ—è¡¨
- `POST /api/roles` - åˆ›å»ºè§’è‰²
- `PUT /api/roles/:id` - æ›´æ–°è§’è‰²
- `DELETE /api/roles/:id` - åˆ é™¤è§’è‰²

### å•†å“ç®¡ç†æ¥å£

- `GET /api/products` - è·å–å•†å“åˆ—è¡¨
- `POST /api/products` - åˆ›å»ºå•†å“
- `GET /api/products/:id` - è·å–å•†å“è¯¦æƒ…
- `PUT /api/products/:id` - æ›´æ–°å•†å“
- `DELETE /api/products/:id` - åˆ é™¤å•†å“
- `GET /api/products/specs/list` - è·å–å•†å“è§„æ ¼åˆ—è¡¨
- `GET /api/products/units/list` - è·å–å•†å“å•ä½åˆ—è¡¨

### ç»Ÿè®¡æ¥å£

- `GET /api/dashboard/stats` - è·å–ç»Ÿè®¡æ•°æ®

## å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- RESTful API è®¾è®¡
- ç»„ä»¶åŒ–å¼€å‘

### å®‰å…¨è§„èŒƒ

- JWT Token éªŒè¯
- bcrypt å¯†ç åŠ å¯†
- SQL æ³¨å…¥é˜²æŠ¤
- XSS æ”»å‡»é˜²æŠ¤
- æƒé™éªŒè¯ä¸­é—´ä»¶

### æ•°æ®åº“è§„èŒƒ

- ç»Ÿä¸€å­—æ®µå‘½åï¼ˆä¸‹åˆ’çº¿å‘½åï¼‰
- åˆ›å»ºæ—¶é—´/æ›´æ–°æ—¶é—´è‡ªåŠ¨ç»´æŠ¤
- è½¯åˆ é™¤æœºåˆ¶
- ç´¢å¼•ä¼˜åŒ–

## éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒé…ç½®

1. ä¿®æ”¹æ•°æ®åº“è¿æ¥é…ç½®
2. è®¾ç½®ç¯å¢ƒå˜é‡
3. æ„å»ºå‰ç«¯é¡¹ç›®
4. é…ç½®åå‘ä»£ç†ï¼ˆNginxï¼‰
5. å¯ç”¨ HTTPS

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t emsp-backend ./backend
docker build -t emsp-frontend ./frontend

# è¿è¡Œå®¹å™¨
docker-compose up -d
```

## å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

- æ£€æŸ¥ MySQL æœåŠ¡æ˜¯å¦å¯åŠ¨
- ç¡®è®¤æ•°æ®åº“è¿æ¥é…ç½®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### 2. æƒé™é—®é¢˜

- ç¡®è®¤ç”¨æˆ·è§’è‰²åˆ†é…
- æ£€æŸ¥æƒé™é…ç½®
- éªŒè¯ JWT Token

### 3. å‰ç«¯é¡µé¢ç©ºç™½

- æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€
- ç¡®è®¤ API æ¥å£æ­£å¸¸
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

## æ›´æ–°æ—¥å¿—

### v1.2.0 (2025-06-23)

- âœ¨ æ–°å¢å•†å“ç®¡ç†åŠŸèƒ½
- âœ¨ æ–°å¢å•†å“è§„æ ¼å’Œå•ä½ç®¡ç†
- âœ¨ æ–°å¢ä»·æ ¼ä¿¡æ¯ç®¡ç†
- âœ¨ æ–°å¢åº“å­˜ç®¡ç†
- ğŸ› ä¿®å¤ JWT Token è§£æé—®é¢˜
- ğŸ› ä¿®å¤ SQL å‚æ•°ç»‘å®šé—®é¢˜
- ğŸ“ å®Œå–„å¼€å‘æ–‡æ¡£

### v1.1.0 (2025-06-22)

- âœ¨ æ–°å¢ä¸ªäººä¿¡æ¯ç®¡ç†
- âœ¨ æ–°å¢å¯†ç ä¿®æ”¹åŠŸèƒ½
- ğŸ› ä¿®å¤ç”¨æˆ·æƒé™è·å–é—®é¢˜
- ğŸ› ä¿®å¤åˆ†é¡µå‚æ•°éªŒè¯é—®é¢˜

### v1.0.0 (2025-06-21)

- ğŸ‰ é¡¹ç›®åˆå§‹åŒ–
- âœ¨ ç”¨æˆ·ç®¡ç†åŠŸèƒ½
- âœ¨ è§’è‰²æƒé™ç®¡ç†
- âœ¨ æ•°æ®ç»Ÿè®¡å±•ç¤º
- âœ¨ JWT èº«ä»½éªŒè¯

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç 
4. å‘èµ· Pull Request

## è®¸å¯è¯

MIT License
